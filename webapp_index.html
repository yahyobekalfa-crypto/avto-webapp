<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avto E'lon</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            padding: 15px;
            padding-bottom: 100px;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 22px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            font-size: 14px;
        }
        
        select, input, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--tg-theme-hint-color, #ccc);
            border-radius: 10px;
            font-size: 16px;
            background: var(--tg-theme-secondary-bg-color, #f5f5f5);
            color: var(--tg-theme-text-color, #000);
        }
        
        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: var(--tg-theme-button-color, #3390ec);
        }
        
        textarea {
            height: 80px;
            resize: none;
        }
        
        .colors {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .color-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
        }
        
        .color-btn.selected {
            border-color: var(--tg-theme-button-color, #3390ec);
        }
        
        .photo-upload {
            border: 2px dashed var(--tg-theme-hint-color, #ccc);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
        }
        
        .photo-upload:hover {
            border-color: var(--tg-theme-button-color, #3390ec);
        }
        
        .photos-preview {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        .photos-preview img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
        }
        
        .error {
            color: #e53935;
            font-size: 12px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <h1>üöó Avto E'lon</h1>
    
    <form id="adForm">
        <!-- Mashina -->
        <div class="form-group">
            <label>üöó Mashina</label>
            <select id="car" required>
                <option value="">Tanlang...</option>
                <option value="matiz">Daewoo Matiz</option>
                <option value="spark">Chevrolet Spark</option>
                <option value="nexia">Daewoo Nexia</option>
                <option value="cobalt">Chevrolet Cobalt</option>
                <option value="lacetti">Chevrolet Lacetti</option>
                <option value="gentra">Chevrolet Gentra</option>
                <option value="malibu">Chevrolet Malibu</option>
                <option value="tracker">Chevrolet Tracker</option>
                <option value="damas">Daewoo Damas</option>
                <option value="labo">Daewoo Labo</option>
            </select>
        </div>
        
        <!-- Yil -->
        <div class="form-group">
            <label>üìÖ Yili</label>
            <select id="year" required>
                <option value="">Tanlang...</option>
            </select>
        </div>
        
        <!-- Narx -->
        <div class="form-group">
            <label>üí∞ Narxi (USD)</label>
            <input type="number" id="price" placeholder="8500" required>
        </div>
        
        <!-- Yurgan km -->
        <div class="form-group">
            <label>üõ£ Yurgan (km)</label>
            <input type="number" id="mileage" placeholder="150000" required>
        </div>
        
        <!-- Rang -->
        <div class="form-group">
            <label>üé® Rangi</label>
            <div class="colors">
                <button type="button" class="color-btn" data-color="Oq" style="background: white; border: 1px solid #ccc;"></button>
                <button type="button" class="color-btn" data-color="Qora" style="background: black;"></button>
                <button type="button" class="color-btn" data-color="Kumush" style="background: silver;"></button>
                <button type="button" class="color-btn" data-color="Kulrang" style="background: gray;"></button>
                <button type="button" class="color-btn" data-color="Ko'k" style="background: blue;"></button>
                <button type="button" class="color-btn" data-color="Qizil" style="background: red;"></button>
                <button type="button" class="color-btn" data-color="Yashil" style="background: green;"></button>
            </div>
            <input type="hidden" id="color" required>
        </div>
        
        <!-- Uzatish -->
        <div class="form-group">
            <label>üîß Uzatish</label>
            <select id="transmission" required>
                <option value="">Tanlang...</option>
                <option value="Mexanika">‚öôÔ∏è Mexanika</option>
                <option value="Avtomat">üîÑ Avtomat</option>
            </select>
        </div>
        
        <!-- Shahar -->
        <div class="form-group">
            <label>üìç Shahar</label>
            <select id="city" required>
                <option value="">Tanlang...</option>
                <option value="Toshkent">Toshkent</option>
                <option value="Samarqand">Samarqand</option>
                <option value="Buxoro">Buxoro</option>
                <option value="Namangan">Namangan</option>
                <option value="Andijon">Andijon</option>
                <option value="Farg'ona">Farg'ona</option>
                <option value="Qarshi">Qarshi</option>
                <option value="Navoiy">Navoiy</option>
                <option value="Jizzax">Jizzax</option>
                <option value="Nukus">Nukus</option>
            </select>
        </div>
        
        <!-- Telefon -->
        <div class="form-group">
            <label>üìû Telefon</label>
            <input type="tel" id="phone" placeholder="+998901234567" required>
        </div>
        
        <!-- Tavsif -->
        <div class="form-group">
            <label>üìù Qo'shimcha ma'lumot</label>
            <textarea id="description" placeholder="Holati, komplektatsiya..."></textarea>
        </div>
    </form>

    <script>
        // Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();
        
        // Yillarni to'ldirish
        const yearSelect = document.getElementById('year');
        for (let y = 2025; y >= 2000; y--) {
            yearSelect.innerHTML += `<option value="${y}">${y}</option>`;
        }
        
        // Rang tanlash
        let selectedColor = '';
        document.querySelectorAll('.color-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                selectedColor = btn.dataset.color;
                document.getElementById('color').value = selectedColor;
            });
        });
        
        // MainButton sozlash
        tg.MainButton.setText('‚úÖ YUBORISH');
        tg.MainButton.show();
        
        // Yuborish
        tg.MainButton.onClick(() => {
            const data = {
                car: document.getElementById('car').value,
                year: document.getElementById('year').value,
                price: document.getElementById('price').value,
                mileage: document.getElementById('mileage').value,
                color: selectedColor,
                transmission: document.getElementById('transmission').value,
                city: document.getElementById('city').value,
                phone: document.getElementById('phone').value,
                description: document.getElementById('description').value || '-'
            };
            
            // Tekshirish
            if (!data.car || !data.year || !data.price || !data.mileage || 
                !data.color || !data.transmission || !data.city || !data.phone) {
                tg.showAlert('‚ùå Barcha maydonlarni to\'ldiring!');
                return;
            }
            
            // Botga yuborish
            tg.sendData(JSON.stringify(data));
        });
    </script>
</body>
</html>
