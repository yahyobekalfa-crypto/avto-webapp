<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avto E'lon</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            padding: 15px;
            padding-bottom: 100px;
        }
        h1 { text-align: center; margin-bottom: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        select, input, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 16px;
        }
        textarea { height: 80px; }
        .colors { display: flex; gap: 10px; flex-wrap: wrap; }
        .color-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
        }
        .color-btn.selected { border-color: #3390ec; }
    </style>
</head>
<body>
    <h1>üöó Avto E'lon</h1>
    
    <div class="form-group">
        <label>üöó Mashina</label>
        <select id="car">
            <option value="">Tanlang...</option>
            <option value="matiz">Daewoo Matiz</option>
            <option value="spark">Chevrolet Spark</option>
            <option value="nexia">Daewoo Nexia</option>
            <option value="cobalt">Chevrolet Cobalt</option>
            <option value="lacetti">Chevrolet Lacetti</option>
            <option value="malibu">Chevrolet Malibu</option>
            <option value="tracker">Chevrolet Tracker</option>
            <option value="damas">Daewoo Damas</option>
            <option value="labo">Daewoo Labo</option>
        </select>
    </div>
    
    <div class="form-group">
        <label>üìÖ Yili</label>
        <select id="year"></select>
    </div>
    
    <div class="form-group">
        <label>üí∞ Narxi (USD)</label>
        <input type="number" id="price" placeholder="8500">
    </div>
    
    <div class="form-group">
        <label>üõ£ Yurgan (km)</label>
        <input type="number" id="mileage" placeholder="150000">
    </div>
    
    <div class="form-group">
        <label>üé® Rangi</label>
        <div class="colors">
            <button type="button" class="color-btn" data-color="Oq" style="background:white;border:1px solid #ccc"></button>
            <button type="button" class="color-btn" data-color="Qora" style="background:black"></button>
            <button type="button" class="color-btn" data-color="Kumush" style="background:silver"></button>
            <button type="button" class="color-btn" data-color="Kulrang" style="background:gray"></button>
            <button type="button" class="color-btn" data-color="Ko'k" style="background:blue"></button>
            <button type="button" class="color-btn" data-color="Qizil" style="background:red"></button>
        </div>
    </div>
    
    <div class="form-group">
        <label>üîß Uzatish</label>
        <select id="transmission">
            <option value="">Tanlang...</option>
            <option value="Mexanika">Mexanika</option>
            <option value="Avtomat">Avtomat</option>
        </select>
    </div>
    
    <div class="form-group">
        <label>üìç Shahar</label>
        <select id="city">
            <option value="">Tanlang...</option>
            <option value="Toshkent">Toshkent</option>
            <option value="Samarqand">Samarqand</option>
            <option value="Buxoro">Buxoro</option>
            <option value="Namangan">Namangan</option>
            <option value="Andijon">Andijon</option>
            <option value="Farg'ona">Farg'ona</option>
        </select>
    </div>
    
    <div class="form-group">
        <label>üìû Telefon</label>
        <input type="tel" id="phone" placeholder="+998901234567">
    </div>
    
    <div class="form-group">
        <label>üìù Qo'shimcha</label>
        <textarea id="description" placeholder="Holati, komplektatsiya..."></textarea>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();
        
        // Yillar
        const yearSelect = document.getElementById('year');
        yearSelect.innerHTML = '<option value="">Tanlang...</option>';
        for (let y = 2025; y >= 2000; y--) {
            yearSelect.innerHTML += '<option value="'+y+'">'+y+'</option>';
        }
        
        // Rang tanlash
        let selectedColor = '';
        document.querySelectorAll('.color-btn').forEach(btn => {
            btn.onclick = function() {
                document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                selectedColor = this.dataset.color;
            };
        });
        
        // Yuborish tugmasi
        tg.MainButton.setText('YUBORISH');
        tg.MainButton.show();
        
        tg.MainButton.onClick(function() {
            const data = {
                car: document.getElementById('car').value,
                year: document.getElementById('year').value,
                price: document.getElementById('price').value,
                mileage: document.getElementById('mileage').value,
                color: selectedColor,
                transmission: document.getElementById('transmission').value,
                city: document.getElementById('city').value,
                phone: document.getElementById('phone').value,
                description: document.getElementById('description').value || '-'
            };
            
            if (!data.car || !data.year || !data.price || !data.phone) {
                tg.showAlert('Barcha maydonlarni toldiring!');
                return;
            }
            
            tg.sendData(JSON.stringify(data));
        });
    </script>
</body>
</html>
